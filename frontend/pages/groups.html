<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groups - Pesewa.com</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/tables.css">
    <link rel="stylesheet" href="../assets/css/forms.css">
    <link rel="stylesheet" href="../assets/css/animations.css">
    <link rel="manifest" href="../manifest.json">
    <link rel="icon" type="image/svg+xml" href="../assets/images/logo.svg">
</head>
<body class="page-groups">
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <a href="../index.html">
                    <img src="../assets/images/logo.svg" alt="Pesewa Logo" class="logo">
                    <span class="brand-name">Pesewa.com</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="./dashboard/borrower-dashboard.html">Dashboard</a></li>
                <li><a href="./lending.html">Lend</a></li>
                <li><a href="./borrowing.html">Borrow</a></li>
                <li class="active"><a href="./groups.html">Groups</a></li>
                <li><a href="./subscriptions.html">Subscription</a></li>
                <li><a href="./ledger.html">Ledger</a></li>
            </ul>
            <div class="nav-actions">
                <div class="user-dropdown">
                    <button class="btn btn-outline" id="userMenuBtn">My Account</button>
                    <div class="dropdown-content">
                        <a href="./dashboard/borrower-dashboard.html">Borrower Dashboard</a>
                        <a href="./dashboard/lender-dashboard.html">Lender Dashboard</a>
                        <a href="./dashboard/admin-dashboard.html">Admin Dashboard</a>
                        <hr>
                        <button id="logoutBtn" class="btn-logout">Logout</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-container">
        <div class="page-header">
            <h1>Trusted Groups</h1>
            <p>Join or create groups based on referrals. Each group is limited to 1,000 members and is country-specific.</p>
            <div class="header-actions">
                <button class="btn btn-primary" id="createGroupBtn">+ Create New Group</button>
                <button class="btn btn-secondary" id="joinGroupBtn">Join Group</button>
            </div>
        </div>

        <div class="groups-stats">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-details">
                    <h3>Your Groups</h3>
                    <p class="stat-value">3/4</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ü§ù</div>
                <div class="stat-details">
                    <h3>Total Members</h3>
                    <p class="stat-value">245</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-details">
                    <h3>Group Loans</h3>
                    <p class="stat-value">‚Çµ12,500</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚≠ê</div>
                <div class="stat-details">
                    <h3>Group Rating</h3>
                    <p class="stat-value">4.6/5.0</p>
                </div>
            </div>
        </div>

        <!-- Your Groups -->
        <section class="section-card">
            <div class="section-header">
                <h2>Your Groups</h2>
                <div class="section-actions">
                    <input type="text" placeholder="Search groups..." class="form-control search-input">
                    <select class="form-select filter-select">
                        <option>All Groups</option>
                        <option>Active</option>
                        <option>By Country</option>
                        <option>By Type</option>
                    </select>
                </div>
            </div>
            <div class="groups-grid">
                <div class="group-card">
                    <div class="group-header">
                        <div class="group-flag">
                            <img src="../assets/images/flags/gh.svg" alt="Ghana Flag">
                        </div>
                        <div class="group-info">
                            <h3>Family Trust Group</h3>
                            <p class="group-meta">Ghana ‚Ä¢ Family ‚Ä¢ Created: 2024-01-15</p>
                        </div>
                        <span class="group-status active">Active</span>
                    </div>
                    <div class="group-stats">
                        <div class="group-stat">
                            <span class="stat-label">Members</span>
                            <span class="stat-value">85/1000</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Active Loans</span>
                            <span class="stat-value">12</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Default Rate</span>
                            <span class="stat-value">1.2%</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Rating</span>
                            <span class="stat-value">‚≠ê 4.7</span>
                        </div>
                    </div>
                    <div class="group-members">
                        <h4>Recent Members</h4>
                        <div class="member-list">
                            <div class="member">
                                <div class="member-avatar">J</div>
                                <span class="member-name">John Borrower</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">S</div>
                                <span class="member-name">Sarah Lender</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">M</div>
                                <span class="member-name">Mike Lender</span>
                            </div>
                        </div>
                    </div>
                    <div class="group-actions">
                        <button class="btn btn-primary btn-small">Enter Group</button>
                        <button class="btn btn-secondary btn-small">Invite</button>
                        <button class="btn btn-alert btn-small">Leave</button>
                    </div>
                </div>

                <div class="group-card">
                    <div class="group-header">
                        <div class="group-flag">
                            <img src="../assets/images/flags/gh.svg" alt="Ghana Flag">
                        </div>
                        <div class="group-info">
                            <h3>Church Group</h3>
                            <p class="group-meta">Ghana ‚Ä¢ Religious ‚Ä¢ Created: 2024-02-10</p>
                        </div>
                        <span class="group-status active">Active</span>
                    </div>
                    <div class="group-stats">
                        <div class="group-stat">
                            <span class="stat-label">Members</span>
                            <span class="stat-value">120/1000</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Active Loans</span>
                            <span class="stat-value">8</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Default Rate</span>
                            <span class="stat-value">0.8%</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Rating</span>
                            <span class="stat-value">‚≠ê 4.8</span>
                        </div>
                    </div>
                    <div class="group-members">
                        <h4>Recent Members</h4>
                        <div class="member-list">
                            <div class="member">
                                <div class="member-avatar">D</div>
                                <span class="member-name">David Borrower</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">A</div>
                                <span class="member-name">Anna Lender</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">P</div>
                                <span class="member-name">Pastor Ndungu</span>
                            </div>
                        </div>
                    </div>
                    <div class="group-actions">
                        <button class="btn btn-primary btn-small">Enter Group</button>
                        <button class="btn btn-secondary btn-small">Invite</button>
                        <button class="btn btn-alert btn-small">Leave</button>
                    </div>
                </div>

                <div class="group-card">
                    <div class="group-header">
                        <div class="group-flag">
                            <img src="../assets/images/flags/gh.svg" alt="Ghana Flag">
                        </div>
                        <div class="group-info">
                            <h3>Business Network</h3>
                            <p class="group-meta">Ghana ‚Ä¢ Professional ‚Ä¢ Created: 2024-03-01</p>
                        </div>
                        <span class="group-status active">Active</span>
                    </div>
                    <div class="group-stats">
                        <div class="group-stat">
                            <span class="stat-label">Members</span>
                            <span class="stat-value">40/1000</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Active Loans</span>
                            <span class="stat-value">5</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Default Rate</span>
                            <span class="stat-value">0.0%</span>
                        </div>
                        <div class="group-stat">
                            <span class="stat-label">Rating</span>
                            <span class="stat-value">‚≠ê 5.0</span>
                        </div>
                    </div>
                    <div class="group-members">
                        <h4>Recent Members</h4>
                        <div class="member-list">
                            <div class="member">
                                <div class="member-avatar">R</div>
                                <span class="member-name">Robert Lender</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">E</div>
                                <span class="member-name">Emma Borrower</span>
                            </div>
                            <div class="member">
                                <div class="member-avatar">K</div>
                                <span class="member-name">Kwame Admin</span>
                            </div>
                        </div>
                    </div>
                    <div class="group-actions">
                        <button class="btn btn-primary btn-small">Enter Group</button>
                        <button class="btn btn-secondary btn-small">Invite</button>
                        <button class="btn btn-alert btn-small">Leave</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recommended Groups -->
        <section class="section-card">
            <h2>Recommended Groups</h2>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Group Name</th>
                            <th>Type</th>
                            <th>Country</th>
                            <th>Members</th>
                            <th>Default Rate</th>
                            <th>Avg. Rating</th>
                            <th>Referral Required</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>Tech Professionals Ghana</strong>
                                <p class="group-description">For tech workers in Accra and Kumasi</p>
                            </td>
                            <td>Professional</td>
                            <td>
                                <div class="country-cell">
                                    <img src="../assets/images/flags/gh.svg" alt="GH" class="flag-small">
                                    Ghana
                                </div>
                            </td>
                            <td>150/1000</td>
                            <td><span class="rate-low">0.5%</span></td>
                            <td>‚≠ê 4.9</td>
                            <td>Yes (2 referrals)</td>
                            <td><button class="btn btn-primary btn-small">Request Join</button></td>
                        </tr>
                        <tr>
                            <td>
                                <strong>University Alumni Group</strong>
                                <p class="group-description">University of Ghana alumni network</p>
                            </td>
                            <td>Alumni</td>
                            <td>
                                <div class="country-cell">
                                    <img src="../assets/images/flags/gh.svg" alt="GH" class="flag-small">
                                    Ghana
                                </div>
                            </td>
                            <td>300/1000</td>
                            <td><span class="rate-low">0.3%</span></td>
                            <td>‚≠ê 4.8</td>
                            <td>Yes (1 referral)</td>
                            <td><button class="btn btn-primary btn-small">Request Join</button></td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Women Entrepreneurs</strong>
                                <p class="group-description">Supporting women in business</p>
                            </td>
                            <td>Business</td>
                            <td>
                                <div class="country-cell">
                                    <img src="../assets/images/flags/gh.svg" alt="GH" class="flag-small">
                                    Ghana
                                </div>
                            </td>
                            <td>200/1000</td>
                            <td><span class="rate-low">0.4%</span></td>
                            <td>‚≠ê 4.7</td>
                            <td>Yes (2 referrals)</td>
                            <td><button class="btn btn-primary btn-small">Request Join</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Create Group Modal -->
        <div id="createGroupModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Create New Group</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="createGroupForm">
                        <div class="form-group">
                            <label for="groupName">Group Name</label>
                            <input type="text" id="groupName" class="form-control" placeholder="e.g., Family Trust Group" required>
                        </div>

                        <div class="form-group">
                            <label for="groupType">Group Type</label>
                            <select id="groupType" class="form-control" required>
                                <option value="">Select type</option>
                                <option value="family">Family</option>
                                <option value="friends">Friends</option>
                                <option value="church">Church/Religious</option>
                                <option value="professional">Professional</option>
                                <option value="community">Community</option>
                                <option value="alumni">Alumni</option>
                                <option value="business">Business</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="groupCountry">Country</label>
                            <select id="groupCountry" class="form-control" required>
                                <option value="">Select country</option>
                                <option value="gh">Ghana</option>
                                <option value="ke">Kenya</option>
                                <option value="ng">Nigeria</option>
                                <option value="tz">Tanzania</option>
                                <option value="ug">Uganda</option>
                                <option value="za">South Africa</option>
                                <option value="rw">Rwanda</option>
                                <option value="bi">Burundi</option>
                                <option value="so">Somalia</option>
                                <option value="ss">South Sudan</option>
                                <option value="et">Ethiopia</option>
                                <option value="cd">Congo</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="groupDescription">Description</label>
                            <textarea id="groupDescription" class="form-control" rows="3" placeholder="Brief description of the group's purpose..." maxlength="500"></textarea>
                            <small class="char-count"><span id="descCharCount">0</span>/500 characters</small>
                        </div>

                        <div class="form-group">
                            <label for="groupRules">Group Rules</label>
                            <div class="rules-list">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Referral-only entry
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Maximum 1,000 members
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Country-locked (no cross-country lending)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox"> Admin approval required for new members
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Maximum 4 groups per user
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="referralCode">Referral Code (Optional)</label>
                            <input type="text" id="referralCode" class="form-control" placeholder="If joining via referral">
                            <small>If you have a referral code from an existing member</small>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-large">Create Group</button>
                            <button type="button" class="btn btn-secondary" id="cancelCreate">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Pesewa.com</h3>
                <p>Emergency micro-lending in trusted circles across Africa.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="./about.html">About Us</a></li>
                    <li><a href="./contact.html">Contact</a></li>
                    <li><a href="./qa.html">Q&A</a></li>
                    <li><a href="./countries/index.html">Countries</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Disclaimer</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Pesewa.com. All rights reserved.</p>
        </div>
    </footer>

    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/groups.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create group modal
            const createGroupModal = document.getElementById('createGroupModal');
            const createGroupBtn = document.getElementById('createGroupBtn');
            const closeModal = document.querySelector('.close-modal');
            const cancelCreate = document.getElementById('cancelCreate');

            createGroupBtn.addEventListener('click', function() {
                createGroupModal.style.display = 'block';
            });

            closeModal.addEventListener('click', function() {
                createGroupModal.style.display = 'none';
            });

            cancelCreate.addEventListener('click', function() {
                createGroupModal.style.display = 'none';
            });

            window.addEventListener('click', function(e) {
                if (e.target === createGroupModal) {
                    createGroupModal.style.display = 'none';
                }
            });

            // Description character count
            const groupDescription = document.getElementById('groupDescription');
            const descCharCount = document.getElementById('descCharCount');

            groupDescription.addEventListener('input', function() {
                descCharCount.textContent = this.value.length;
            });

            // Create group form
            document.getElementById('createGroupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Group created successfully! You are now the admin of this group.');
                this.reset();
                createGroupModal.style.display = 'none';
            });

            // Join group button
            document.getElementById('joinGroupBtn').addEventListener('click', function() {
                alert('To join a group, you need a referral from an existing member. Please contact a group member for a referral code.');
            });

            // Enter group buttons
            document.querySelectorAll('.group-actions .btn-primary').forEach(btn => {
                btn.addEventListener('click', function() {
                    const groupName = this.closest('.group-card').querySelector('h3').textContent;
                    alert(`Entering ${groupName}... Redirecting to group dashboard.`);
                    // In real implementation, would redirect to group-specific page
                });
            });

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to logout?')) {
                    window.location.href = '../index.html';
                }
            });

            // User dropdown
            const userMenuBtn = document.getElementById('userMenuBtn');
            const dropdownContent = document.querySelector('.dropdown-content');

            userMenuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
            });

            window.addEventListener('click', function() {
                dropdownContent.style.display = 'none';
            });
        });
    </script>
</body>
</html>