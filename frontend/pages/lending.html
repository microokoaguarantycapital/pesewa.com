<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lend Money - Pesewa.com</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/forms.css">
    <link rel="stylesheet" href="../assets/css/tables.css">
    <link rel="stylesheet" href="../assets/css/animations.css">
    <link rel="manifest" href="../manifest.json">
    <link rel="icon" type="image/svg+xml" href="../assets/images/logo.svg">
</head>
<body class="page-lending">
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <a href="../index.html">
                    <img src="../assets/images/logo.svg" alt="Pesewa Logo" class="logo">
                    <span class="brand-name">Pesewa.com</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="./dashboard/lender-dashboard.html">Dashboard</a></li>
                <li class="active"><a href="./lending.html">Lend</a></li>
                <li><a href="./borrowing.html">Borrow</a></li>
                <li><a href="./groups.html">Groups</a></li>
                <li><a href="./subscriptions.html">Subscription</a></li>
            </ul>
            <div class="nav-actions">
                <a href="./dashboard/lender-dashboard.html" class="btn btn-outline">My Account</a>
                <button id="logoutBtn" class="btn btn-logout">Logout</button>
            </div>
        </nav>
    </header>

    <main class="main-container">
        <div class="page-header">
            <h1>Lend to Trusted Borrowers</h1>
            <p>Select borrowers from your groups and offer loans for specific needs. Earn 10% weekly interest.</p>
        </div>

        <div class="content-grid">
            <!-- Lending Form -->
            <section class="card lending-form-card">
                <h2>Create Loan Offer</h2>
                <form id="lendingForm">
                    <div class="form-group">
                        <label for="borrowerSelect">Select Borrower</label>
                        <select id="borrowerSelect" class="form-select" required>
                            <option value="">Choose a borrower from your groups</option>
                            <option value="john">John Borrower (‚≠ê4.2) - Family Trust Group</option>
                            <option value="mary">Mary Borrower (‚≠ê4.5) - Church Group</option>
                            <option value="david">David Borrower (‚≠ê4.0) - Business Network</option>
                            <option value="susan">Susan Borrower (‚≠ê4.8) - Family Trust Group</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="loanCategory">Loan Category</label>
                        <div class="category-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="transport"> üöå Transport
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="data"> üì± Data & Airtime
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="gas"> üî• Cooking Gas
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="food"> üç≤ Food
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="water"> üíß Water Bill
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="fuel"> ‚õΩ Fuel
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="repair"> üõ†Ô∏è Repair
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="medicine"> üíä Medicine
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="electricity"> üí° Electricity
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="school"> üéì School Fees
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="category" value="tv"> üì∫ TV Subscription
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="loanAmount">Loan Amount (‚Çµ)</label>
                        <div class="amount-slider">
                            <input type="range" id="loanAmount" min="50" max="20000" value="1000" class="slider">
                            <div class="slider-labels">
                                <span>‚Çµ50</span>
                                <span id="amountDisplay">‚Çµ1,000</span>
                                <span>‚Çµ20,000</span>
                            </div>
                            <small>Maximum based on your Super Tier subscription</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="interestRate">Interest Rate</label>
                        <div class="interest-display">
                            <span id="interestRateDisplay">10%</span> per week (fixed)
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="repaymentTerms">Repayment Terms</label>
                        <div class="terms-info">
                            <p>‚Ä¢ Maximum 7 days repayment period</p>
                            <p>‚Ä¢ Daily partial payments allowed</p>
                            <p>‚Ä¢ 5% daily penalty after 7 days</p>
                            <p>‚Ä¢ Default after 60 days (blacklist)</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="guarantorInfo">Guarantor Information</label>
                        <div class="info-box">
                            <p>Borrower's Guarantors:</p>
                            <ul>
                                <li>James Smith: +233 24 123 4567</li>
                                <li>Sarah Johnson: +233 24 765 4321</li>
                            </ul>
                            <p><strong>Verify guarantors before lending.</strong></p>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">Create Loan Offer</button>
                        <button type="button" class="btn btn-secondary" id="previewBtn">Preview Ledger</button>
                    </div>
                </form>
            </section>

            <!-- Active Offers -->
            <section class="card active-offers-card">
                <h2>Your Active Loan Offers</h2>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Borrower</th>
                                <th>Amount</th>
                                <th>Category</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>John Borrower</td>
                                <td>‚Çµ1,200</td>
                                <td>üöå Transport</td>
                                <td>2024-03-20</td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success">View</button>
                                    <button class="btn btn-sm btn-alert">Cancel</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Mary Borrower</td>
                                <td>‚Çµ5,000</td>
                                <td>üíä Medicine</td>
                                <td>2024-03-18</td>
                                <td><span class="status pending">Pending</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success">Approve</button>
                                    <button class="btn btn-sm btn-alert">Reject</button>
                                </td>
                            </tr>
                            <tr>
                                <td>David Borrower</td>
                                <td>‚Çµ800</td>
                                <td>üç≤ Food</td>
                                <td>2024-03-15</td>
                                <td><span class="status active">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success">View</button>
                                    <button class="btn btn-sm btn-alert">Cancel</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Calculator -->
            <section class="card calculator-card">
                <h2>Earnings Calculator</h2>
                <div class="calculator">
                    <div class="calc-inputs">
                        <div class="form-group">
                            <label for="calcAmount">Loan Amount (‚Çµ)</label>
                            <input type="number" id="calcAmount" value="1000" min="50" max="20000" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="calcWeeks">Number of Weeks</label>
                            <input type="number" id="calcWeeks" value="4" min="1" max="52" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="calcLoans">Loans per Week</label>
                            <input type="number" id="calcLoans" value="2" min="1" max="20" class="form-control">
                        </div>
                    </div>
                    <div class="calc-results">
                        <h3>Projected Earnings</h3>
                        <div class="result-item">
                            <span>Weekly Interest:</span>
                            <strong id="weeklyInterest">‚Çµ200</strong>
                        </div>
                        <div class="result-item">
                            <span>Monthly Earnings:</span>
                            <strong id="monthlyEarnings">‚Çµ800</strong>
                        </div>
                        <div class="result-item">
                            <span>Quarterly Potential:</span>
                            <strong id="quarterlyPotential">‚Çµ2,400</strong>
                        </div>
                        <div class="result-item highlight">
                            <span>Annual Earnings:</span>
                            <strong id="annualEarnings">‚Çµ9,600</strong>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Pesewa.com</h3>
                <p>Emergency micro-lending in trusted circles across Africa.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="./about.html">About Us</a></li>
                    <li><a href="./contact.html">Contact</a></li>
                    <li><a href="./qa.html">Q&A</a></li>
                    <li><a href="./subscriptions.html">Subscriptions</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Disclaimer</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Pesewa.com. All rights reserved.</p>
        </div>
    </footer>

    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/lending.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Amount slider
            const loanAmount = document.getElementById('loanAmount');
            const amountDisplay = document.getElementById('amountDisplay');
            
            loanAmount.addEventListener('input', function() {
                amountDisplay.textContent = `‚Çµ${parseInt(this.value).toLocaleString()}`;
            });

            // Calculator
            const calcAmount = document.getElementById('calcAmount');
            const calcWeeks = document.getElementById('calcWeeks');
            const calcLoans = document.getElementById('calcLoans');
            const weeklyInterest = document.getElementById('weeklyInterest');
            const monthlyEarnings = document.getElementById('monthlyEarnings');
            const quarterlyPotential = document.getElementById('quarterlyPotential');
            const annualEarnings = document.getElementById('annualEarnings');

            function updateCalculator() {
                const amount = parseFloat(calcAmount.value) || 0;
                const weeks = parseFloat(calcWeeks.value) || 0;
                const loans = parseFloat(calcLoans.value) || 0;
                
                const weekly = amount * 0.10 * loans;
                const monthly = weekly * 4;
                const quarterly = monthly * 3;
                const annual = monthly * 12;

                weeklyInterest.textContent = `‚Çµ${weekly.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                monthlyEarnings.textContent = `‚Çµ${monthly.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                quarterlyPotential.textContent = `‚Çµ${quarterly.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                annualEarnings.textContent = `‚Çµ${annual.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
            }

            [calcAmount, calcWeeks, calcLoans].forEach(input => {
                input.addEventListener('input', updateCalculator);
            });
            updateCalculator();

            // Form submission
            document.getElementById('lendingForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Loan offer created successfully! The borrower will be notified.');
                this.reset();
            });

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to logout?')) {
                    window.location.href = '../index.html';
                }
            });
        });
    </script>
</body>
</html>